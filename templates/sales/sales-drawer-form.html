{{/*
Sales drawer form â€” loaded into #sheetContent via HTMX.
Used by both Add and Edit actions.
Data: .Name, .ReferenceNumber, .Date, .Currency, .Status, .Notes, .LocationID, .Locations, .ID, .FormAction, .IsEdit, .CommonLabels, .Labels
*/}}
{{define "sales-drawer-form"}}
<form hx-post="{{.FormAction}}" hx-swap="none" hx-on::after-request="Sheet.handleResponse(event)">
    {{if .ID}}<input type="hidden" name="id" value="{{.ID}}">{{end}}

    <div class="sheet-body">
        {{/* --- Sale Information --- */}}
        <div class="form-row single">
            {{template "form-group" (dict
                "Type" "text"
                "Name" "reference_number"
                "Label" .Labels.Reference
                "Value" .ReferenceNumber
                "Required" true
                "Placeholder" .Labels.ReferencePlaceholder
            )}}
        </div>

        <div class="form-row">
            {{template "form-group" (dict
                "Type" "date"
                "Name" "revenue_date_string"
                "Label" .Labels.Date
                "Value" .Date
                "Required" true
            )}}
            {{template "form-group" (dict
                "Type" "text"
                "Name" "currency"
                "Label" .Labels.Currency
                "Value" .Currency
                "Placeholder" "PHP"
            )}}
        </div>

        <div class="form-row single">
            {{template "form-group" (dict
                "Type" "select"
                "Name" "status"
                "Label" .Labels.Status
                "Value" .Status
                "Options" (list
                    (dict "Value" "ongoing" "Label" "Ongoing")
                    (dict "Value" "complete" "Label" "Complete")
                    (dict "Value" "cancelled" "Label" "Cancelled")
                )
            )}}
        </div>

        {{/* --- Location --- */}}
        {{template "form-section" (dict "Title" .Labels.Location)}}

        <div class="form-row single">
            {{template "form-group" (dict
                "Type" "select"
                "Name" "location_id"
                "Label" .Labels.Location
                "Value" .LocationID
                "Required" true
                "Options" .Locations
            )}}
        </div>

        {{/* --- Customer --- */}}
        {{template "form-section" (dict "Title" .Labels.Customer)}}

        <div class="form-row single">
            {{template "form-group" (dict
                "Type" "text"
                "Name" "name"
                "Label" .Labels.Customer
                "Value" .Name
                "Required" true
                "Placeholder" "Customer name"
            )}}
        </div>

        {{/* --- Notes --- */}}
        {{template "form-section" (dict "Title" .Labels.Notes)}}

        <div class="form-row single">
            {{template "form-group" (dict
                "Type" "textarea"
                "Name" "notes"
                "Label" .Labels.Notes
                "Value" .Notes
                "Placeholder" .Labels.NotesPlaceholder
            )}}
        </div>
    </div>

    {{template "sheet-form-footer" (dict "CommonLabels" .CommonLabels "ShowCancel" true "IsEdit" .IsEdit)}}
</form>
{{end}}
